# 👥 HDRP-Companion Multi-Companion Management Guide

Complete guide for multi-companion coordination in RedM.

## 🎯 Multi-Companion Overview

When multiple companions are active in an area, the system automatically manages pack behavior, formations, and leadership. Everything happens automatically based on context and proximity.

## 🤖 How Automatic Coordination Works

### **🔍 Detection System**
The system continuously scans for:
- **Nearby companions** within 50-meter radius
- **Companion ownership** (which player owns which companion)
- **Pack composition** (how many companions per player)
- **Environmental context** (location, activity, threats)

### **🧠 Intelligence Engine**
Every 3 seconds, the system analyzes:
- **Current player activity** (combat, hunting, walking, idle)
- **Total companion count** in the area
- **Optimal pack behavior** for the situation
- **Leadership hierarchy** based on bonding levels

### **⚡ Automatic Execution**
The system applies:
- **Formation positioning** for companions
- **Coordinated movement** patterns
- **Role assignments** based on companion abilities
- **Pack leadership** structure

## 🐕 Pack Dynamics (Automatic)

### **🏛️ Leadership System**
**Automatically Determined By:**
- **Bonding Level**: Higher bonding = leadership priority
- **Experience**: More experienced companions lead
- **Companion Count**: Players with more companions get priority
- **Proximity**: Closest companions to player activity

**Leadership Benefits:**
- **Tactical Coordination**: Leader companion guides pack movement
- **Decision Making**: Alpha companion determines group responses
- **Protection Priority**: Leader protects weaker pack members
- **Formation Control**: Sets pace and positioning for group

### **👥 Pack Roles (Auto-Assigned)**
The system automatically assigns roles based on companion abilities and context:

#### **🔍 Scout Role** (Automatic)
**When Assigned**: Fast companions, exploration context
**Behavior**: 
- Moves 50-100 meters ahead of main pack
- Provides early threat detection
- Identifies safe routes and resources
- Reports back to pack through AI coordination

#### **🛡️ Guard Role** (Automatic)  
**When Assigned**: Large/aggressive companions, defensive context
**Behavior**:
- Maintains close position to player
- Prioritizes threat assessment and protection
- Forms defensive perimeters when needed
- Intimidates potential threats

#### **🦌 Hunter Role** (Automatic)
**When Assigned**: Hunting activity detected, specialized breeds
**Behavior**:
- Coordinates with pack for hunting activities
- Positions for optimal prey capture
- Silent movement and stealth approach
- Resource gathering and retrieval

#### **🎒 Support Role** (Automatic)
**When Assigned**: High-bonding companions, logistics needs
**Behavior**:
- Carries additional supplies in pack scenarios
- Provides medical/recovery assistance
- Maintains group communication
- Emergency response coordination

## 🏗️ Automatic Formation System

### **Formation Selection Logic**
The system chooses formations based on:
- **Activity Type**: Combat, hunting, exploration, idle
- **Companion Count**: 2-3 companions vs 4+ companions
- **Environment**: Open terrain vs dense areas
- **Threat Level**: Safe areas vs dangerous zones

### **🚶 Available Formations**

#### **📏 Follow Formation**
**Triggers**: 2+ companions, walking/running, safe environment
**Behavior**: Companions form line behind player with 4m spacing
**Advantages**: Organized movement, easy to control, good for travel

#### **🔵 Defensive Circle**
**Triggers**: 3+ companions, combat detected, high threat areas
**Behavior**: Companions form 5m radius circle around player
**Advantages**: 360-degree protection, mutual support, threat response

#### **🌐 Exploration Spread**
**Triggers**: 2+ companions, exploration mode, open terrain
**Behavior**: Companions spread 15m radius for maximum coverage
**Advantages**: Area scanning, resource detection, wide awareness

#### **🎯 Pack Hunting**
**Triggers**: 2+ companions, hunting activity, prey detected
**Behavior**: Coordinated positioning for prey capture and driving
**Advantages**: Efficient hunting, prey management, shared success

#### **🔄 Independent Mode**
**Triggers**: Single companion or low-coordination contexts
**Behavior**: Companions act individually with basic following
**Advantages**: Minimal coordination overhead, individual freedom

## 📊 Coordination Triggers

### **🔄 Context-Based Behavior Changes**

| Player Activity | Companion Count | Auto-Formation | Behavior Focus |
|----------------|-----------------|----------------|----------------|
| **Combat** | 2-3 | Follow Formation | Protect player |
| **Combat** | 4+ | Defensive Circle | Area defense |
| **Hunting** | 2+ | Pack Hunting | Prey coordination |
| **Walking** | 2-3 | Exploration Spread | Area coverage |
| **Running** | 2+ | Follow Formation | Keep pace |
| **Idle** | 2-3 | Follow Formation | Relaxed watching |
| **Idle** | 4+ | Defensive Circle | Social gathering |

### **🌍 Environmental Adaptations**

#### **🏙️ Urban Areas (Towns/Cities)**
- **Tighter formations** to avoid NPC interference
- **Reduced spread distance** for navigation
- **Higher alert status** for crowded areas
- **Noise discipline** for stealth in settlements

#### **🌲 Wilderness Areas**
- **Extended formations** for maximum coverage
- **Natural positioning** using terrain features
- **Enhanced alertness** for wildlife threats
- **Resource gathering** opportunities

#### **⚔️ Combat Zones**
- **Immediate defensive positioning**
- **Threat assessment** and response priority
- **Player protection** as primary objective
- **Coordinated escape routes** if overwhelmed

## 🎮 Player Experience

### **What You'll See**
- **Smart Positioning**: Companions automatically position themselves optimally
- **Coordinated Movement**: Pack moves together with purpose and organization
- **Adaptive Behavior**: Formation changes as activity and context change
- **Natural Leadership**: One companion naturally becomes the pack leader
- **Protective Instincts**: Pack prioritizes player safety in all situations

### **What You Control**
- **Companion Care**: Individual feeding, grooming, and medical care
- **Activity Initiation**: Starting combat, hunting, or exploration
- **Basic Commands**: Call, flee, and action prompts for individual companions
- **Customization**: Individual companion appearance and equipment

### **What Happens Automatically**
- **Formation Selection**: System chooses optimal pack formation
- **Leadership Assignment**: Most suitable companion becomes pack leader
- **Role Distribution**: Companions automatically assigned appropriate roles
- **Tactical Positioning**: Pack positions for maximum effectiveness
- **Threat Response**: Coordinated reaction to dangers and opportunities

## 📈 Pack Development

### **🎯 Experience and Learning**
**Pack Coordination Improves Through:**
- **Time Spent Together**: Longer pack time = better coordination
- **Shared Activities**: Hunting, combat, exploration build pack bonds
- **Success Rate**: Successful pack activities improve future performance
- **Player Interaction**: Individual attention strengthens pack loyalty

### **🤝 Inter-Companion Relationships**
**Automatically Develops:**
- **Friendship Bonds**: Compatible companions develop cooperation
- **Rivalry Management**: System mediates conflicts between companions
- **Mentorship**: Experienced companions guide newer pack members
- **Pack Hierarchy**: Natural leadership order emerges over time

### **📊 Pack Performance Metrics**
**System Tracks:**
- **Coordination Efficiency**: How well pack works together
- **Response Times**: Speed of formation changes and commands
- **Success Rates**: Effectiveness in combat, hunting, and activities
- **Pack Stability**: Leadership consistency and relationship harmony

## 🎪 Multi-Companion Activities

### **🦌 Automatic Pack Hunting**
**How It Works:**
1. System detects hunting context (weapons drawn, animals nearby)
2. Companions automatically switch to Pack Hunting formation
3. Roles assigned: Driver (pushes prey), Blocker (prevents escape), Retriever (collects)
4. Coordinated hunting sequence executes automatically
5. Pack shares success and experience

**Player Role:**
- Initiate hunting by targeting animals
- Take shots when companions position prey optimally
- Provide overall direction and safety oversight

### **🔍 Coordinated Exploration**
**How It Works:**
1. System detects exploration context (movement in open areas)
2. Companions spread in Exploration formation automatically
3. Each companion covers different area sectors
4. Discoveries and threats reported back to pack
5. Formation adjusts based on findings

**Player Experience:**
- Much larger effective search area
- Earlier threat detection from multiple angles
- Increased resource and treasure discovery
- Natural pack movement through terrain

### **🛡️ Pack Defense**
**How It Works:**
1. System detects threats (aggressive NPCs, predators, hostile players)
2. Immediate switch to Defensive Circle formation
3. Companions automatically assess threat levels
4. Coordinated defensive positions around player
5. Escalated response based on threat severity

**Player Benefits:**
- 360-degree threat coverage
- Multiple companions engaging different threats
- Player protected while managing combat
- Coordinated retreat if overwhelmed

## 🔧 Advanced Pack Features

### **🎯 Intelligent Pack Size Management**
**System automatically optimizes pack performance:**
- **2 Companions**: Focus on coordination and efficiency
- **3 Companions**: Balanced formations with role specialization
- **4+ Companions**: Complex formations with multiple roles
- **Mixed Players**: Coordination across multiple player packs

### **🧠 Learning and Adaptation**
**Pack AI continuously improves:**
- **Success Pattern Recognition**: Learns what formations work best
- **Player Preference Learning**: Adapts to individual player style
- **Environmental Memory**: Remembers effective strategies for different areas
- **Threat Response Evolution**: Improves defensive and offensive capabilities

### **📊 Performance Optimization**
**System maintains smooth performance:**
- **Update Frequency**: 3-second coordination checks, 500ms quick updates
- **Efficient Pathfinding**: Smart movement calculations
- **Resource Management**: Minimal server impact
- **Scalability**: Handles multiple packs simultaneously

## 🎛️ Configuration and Customization

### **What Admins Can Adjust**
- **Maximum Companions per Player**: Default 3, configurable
- **Coordination Range**: Default 50m, adjustable
- **Update Intervals**: Timing for coordination checks
- **Pack Behavior Modes**: Performance vs quality settings

### **What Players Can Influence**
- **Individual Companion Training**: Affects pack role assignment
- **Bonding Levels**: Influences leadership probability
- **Activity Choices**: Determines formation triggers
- **Companion Care**: Affects pack performance and loyalty

## 🎮 Key Points

- **Automatic coordination** - formations and roles assigned intelligently
- **Context-aware behavior** - adapts to your activities and environment
- **Focus on bonding** - individual companion relationships improve pack performance
- **Seamless experience** - watch your pack work together naturally

